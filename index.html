<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tama Fishing</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; background: #1a2a6c; color: white; text-align: center; margin: 0; padding: 20px; }
        .btn { background: #4CAF50; border: none; color: white; padding: 15px; width: 100%; font-size: 18px; border-radius: 12px; margin: 10px 0; font-weight: bold; }
        .btn:active { transform: scale(0.98); background: #45a049; }
        #status { font-size: 14px; color: #88bdff; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>üé£ Tamacoin Fishing</h1>
    <button class="btn" onclick="sendToBot('catch_fish')">–ó–ê–ë–†–û–° –£–î–û–ß–ö–ò</button>
    <button class="btn" style="background:#f44336" onclick="sendToBot('sell_fish')">–ü–†–û–î–ê–¢–¨ –£–õ–û–í</button>
    <div id="status">–ì–æ—Ç–æ–≤ –∫ —Ä—ã–±–∞–ª–∫–µ</div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–≤–æ–π –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä Render
        const SERVER_URL = 'https://tama-bot-server.onrender.com/api/action';

        async function sendToBot(actionName) {
            const status = document.getElementById('status');
            status.innerText = "–ó–∞–±—Ä–∞—Å—ã–≤–∞–µ–º... üé£";

            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
            const userData = {
                userId: tg.initDataUnsafe.user.id,
                action: actionName
            };

            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ Render –ë–ï–ó –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞
                const response = await fetch(SERVER_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(userData)
                });

                if (response.ok) {
                    status.innerText = "–£—Å–ø–µ—à–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å —á–∞—Ç –±–æ—Ç–∞.";
                } else {
                    status.innerText = "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞";
                }
            } catch (e) {
                status.innerText = "–°–≤—è–∑—å –ø–æ—Ç–µ—Ä—è–Ω–∞...";
            }
        }
    </script>
</body>
</html>
