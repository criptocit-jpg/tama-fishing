<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tamacoin Fishing Gold 5.0.0 - MONOLITH</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* --- –°–¢–ò–õ–ò –ò–ó –ó–û–õ–û–¢–û–ô –ë–ê–ó–´ 4.1.2 --- */
        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
            margin: 0; 
            padding: 0; 
            user-select: none; 
        }

        :root { 
            --gold: #ffd700; 
            --gold-dark: #b8860b; 
            --bg: #0f172a; 
            --panel: rgba(30, 41, 59, 0.95); 
            --accent: #fbbf24; 
            --text-main: #f8fafc; 
            --text-muted: #94a3b8; 
            --success: #10b981; 
            --danger: #ef4444; 
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-mono: 'Cascadia Code', 'Fira Code', monospace; 
            --shadow-gold: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        body { 
            font-family: var(--font-main); 
            background: var(--bg); 
            color: var(--text-main); 
            overflow: hidden; 
            height: 100vh; 
            width: 100vw; 
            display: flex; 
            flex-direction: column; 
        }

        .header-fixed { 
            flex-shrink: 0; 
            z-index: 1000; 
            background: var(--bg); 
            border-bottom: 1px solid rgba(255,255,255,0.08); 
        }

        .marquee { 
            background: #020617; 
            height: 30px; 
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            border-bottom: 1px solid var(--gold); 
            position: relative; 
        }

        .marquee-content { 
            white-space: nowrap; 
            display: inline-block; 
            animation: marquee-scroll 30s linear infinite; 
            font-size: 13px; 
            color: var(--gold); 
            padding-left: 100vw; 
            font-weight: 600; 
            text-transform: uppercase; 
        }

        @keyframes marquee-scroll { 
            0% { transform: translateX(0); } 
            100% { transform: translateX(-100%); } 
        }
        
        .timers-row { 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
            padding: 10px 5px; 
            font-family: var(--font-mono); 
            font-size: 11px; 
            background: rgba(0,0,0,0.4); 
        }

        .timer-block {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .timer-label {
            color: var(--text-muted);
            font-size: 9px;
        }

        .timer-val { 
            color: var(--gold); 
            font-weight: 800; 
            min-width: 65px; 
        }

        .top-stats { 
            padding: 12px 16px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 10px; 
            flex-shrink: 0; 
        }

        .balance-pill { 
            background: linear-gradient(145deg, #1e293b, #0f172a); 
            padding: 8px 24px; 
            border-radius: 30px; 
            border: 1px solid var(--gold); 
            text-align: center; 
            min-width: 180px; 
            box-shadow: var(--shadow-gold); 
            position: relative; 
            overflow: hidden; 
        }

        .balance-label {
            font-size: 9px;
            color: var(--text-muted);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .balance-value { 
            font-size: 26px; 
            font-weight: 900; 
            color: var(--gold); 
            text-shadow: 0 0 10px rgba(255,215,0,0.5); 
        }
        
        .status-info-grid { 
            display: grid; 
            grid-template-columns: 1fr 1.4fr 1fr; 
            gap: 10px; 
            width: 100%; 
            margin-top: 5px; 
        }

        .status-card { 
            background: var(--panel); 
            padding: 10px 5px; 
            border-radius: 14px; 
            border: 1px solid rgba(255,255,255,0.05); 
            text-align: center; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            transition: all 0.3s ease;
        }

        .status-card:active {
            transform: scale(0.98);
            background: rgba(255,255,255,0.05);
        }

        .status-card span { 
            font-size: 9px; 
            color: var(--text-muted); 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            margin-bottom: 4px; 
        }

        .status-card b { 
            font-size: 14px; 
            color: var(--text-main); 
            font-family: var(--font-mono); 
        }

        .game-view-container { 
            padding: 0 16px; 
            flex-shrink: 0; 
            margin-bottom: 12px; 
        }

        .game-view { 
            height: 180px; 
            width: 100%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            position: relative; 
            border-radius: 24px; 
            background: #000; 
            border: 2px solid rgba(255,255,255,0.1); 
            overflow: hidden; 
            box-shadow: inset 0 0 30px rgba(0,0,0,0.8); 
        }

        .float-img { 
            max-width: 100%; 
            max-height: 100%; 
            opacity: 0; 
            transition: opacity 0.5s ease; 
            z-index: 5; 
        }

        .anim-cast { 
            animation: cast-process 1.6s ease-in-out forwards; 
        }

        @keyframes cast-process { 
            0% { transform: scale(0.6) translateY(20px); opacity: 0; } 
            20% { opacity: 1; transform: scale(1) translateY(0); } 
            80% { opacity: 1; transform: scale(1) translateY(0); } 
            100% { opacity: 0; transform: scale(1.1); } 
        }
        
        #status-msg { 
            color: var(--gold); 
            font-size: 11px; 
            position: absolute; 
            bottom: 15px; 
            font-weight: 900; 
            background: rgba(15, 23, 42, 0.9); 
            padding: 6px 18px; 
            border-radius: 25px; 
            border: 1px solid rgba(255, 215, 0, 0.3); 
            z-index: 10; 
            text-transform: uppercase; 
        }

        .tabs-container { 
            flex-grow: 1; 
            width: 100%; 
            overflow-y: auto; 
            padding: 5px 16px; 
            scrollbar-width: none; 
            -ms-overflow-style: none; 
        }

        .tabs-container::-webkit-scrollbar { 
            display: none; 
        }

        .tab-content { 
            display: none; 
            width: 100%; 
            padding-bottom: 30px; 
        }

        .tab-active { 
            display: block; 
            animation: tabAppear 0.4s ease-out; 
        }

        @keyframes tabAppear { 
            from { opacity: 0; transform: translateY(12px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        /* --- –°–¢–ò–õ–ò –ê–î–ú–ò–ù–ö–ò --- */
        .admin-table { 
            width: 100%; 
            border-collapse: collapse; 
            font-size: 12px; 
            background: rgba(0,0,0,0.3); 
            border-radius: 12px; 
            overflow: hidden; 
            margin-top: 10px; 
        }

        .admin-table th { 
            background: rgba(255,215,0,0.1); 
            color: var(--gold); 
            text-align: left; 
            padding: 12px 8px; 
            font-size: 10px; 
            text-transform: uppercase; 
        }

        .admin-table td { 
            padding: 12px 8px; 
            border-bottom: 1px solid rgba(255,255,255,0.05); 
            vertical-align: middle; 
        }
        /* –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï –°–¢–ò–õ–ï–ô –ò–ó –ó–û–õ–û–¢–û–ô –ë–ê–ó–´ */
        .admin-btn { 
            padding: 6px 10px; 
            border-radius: 6px; 
            border: none; 
            font-weight: 800; 
            cursor: pointer; 
            font-size: 10px; 
            text-transform: uppercase; 
            transition: 0.2s; 
        }

        .admin-btn:active { 
            transform: scale(0.95); 
        }

        .withdraw-card { 
            background: linear-gradient(135deg, rgba(30,41,59,0.8), rgba(15,23,42,0.9)); 
            border-left: 4px solid var(--gold); 
            padding: 15px; 
            margin-bottom: 12px; 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
        }

        .btn-cast { 
            background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%); 
            color: white; 
            border: none; 
            width: 100%; 
            height: 50px; 
            border-radius: 18px; 
            font-size: 18px; 
            font-weight: 900; 
            box-shadow: 0 4px 0 #92400e; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            transition: 0.1s; 
            position: relative;
            overflow: hidden;
        }

        .btn-cast:active { 
            transform: translateY(2px); 
            box-shadow: 0 2px 0 #92400e; 
        }

        .btn-cast:disabled { 
            filter: grayscale(1); 
            opacity: 0.6; 
            transform: none; 
            box-shadow: none; 
        }

        .nav-bar { 
            height: 75px; 
            background: #020617; 
            border-top: 1px solid rgba(255,255,255,0.1); 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
            padding-bottom: env(safe-area-inset-bottom); 
        }

        .nav-item { 
            font-size: 10px; 
            text-align: center; 
            color: #64748b; 
            flex: 1; 
            font-weight: 800; 
            display: flex; 
            flex-direction: column; 
            gap: 5px; 
            transition: 0.3s; 
        }

        .nav-item i { 
            font-style: normal; 
            font-size: 22px; 
            filter: grayscale(1); 
            transition: 0.3s; 
        }

        .nav-item.active { 
            color: var(--gold); 
        }

        .nav-item.active i { 
            filter: grayscale(0); 
            transform: translateY(-3px); 
            text-shadow: 0 0 10px var(--gold); 
        }

        #catch-overlay { 
            position: absolute; 
            inset: 0; 
            background: rgba(0,0,0,0.96); 
            display: none; 
            align-items: center; 
            justify-content: center; 
            z-index: 2000; 
            backdrop-filter: blur(8px); 
        }

        .catch-modal { 
            background: radial-gradient(circle at top, #1e293b, #0f172a); 
            padding: 40px 30px; 
            border: 2px solid var(--gold); 
            border-radius: 35px; 
            text-align: center; 
            width: 85%; 
            animation: modalPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            box-shadow: 0 0 50px rgba(0,0,0,0.5); 
        }

        @keyframes modalPop { 
            from { transform: scale(0.5); opacity: 0; } 
            to { transform: scale(1); opacity: 1; } 
        }

        .catch-modal h2 { 
            color: var(--gold); 
            font-size: 28px; 
            margin-bottom: 10px; 
            font-weight: 900; 
        }

        #catch-info { 
            font-size: 18px; 
            color: #fff; 
            margin-bottom: 25px; 
            font-family: var(--font-mono); 
        }

        .shop-cat-content {
            display: none;
            flex-direction: column;
            gap: 12px;
            margin-top: 15px;
        }

        .shop-cat-content.open {
            display: flex;
        }

        .item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255,255,255,0.03);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.05);
            transition: 0.2s;
        }

        .item-row:active {
            background: rgba(255,255,255,0.06);
        }

        .item-info h4 {
            font-size: 14px;
            margin-bottom: 2px;
        }

        .item-info p {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* --- –ö–û–ù–ï–¶ –°–¢–ò–õ–ï–ô --- */
    </style>
</head>
<body>
    <div id="top-area-wrapper">
        <div class="header-fixed">
            <div class="marquee">
                <div class="marquee-content" id="events-line">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –º–∏—Ä–æ–≤—ã—Ö —Ä–µ–∫–æ—Ä–¥–æ–≤ Tamacoin Fishing...
                </div>
            </div>
            <div class="timers-row">
                <div class="timer-block">
                    <span class="timer-label">–ó–û–õ–û–¢–û–ô –ß–ê–°:</span> 
                    <span id="gold-timer" class="timer-val">00:00:00</span>
                </div>
                <div class="timer-block">
                    <span class="timer-label">–ë–û–ù–£–° –ß–ï–†–ï–ó:</span> 
                    <span id="bonus-timer" class="timer-val">--:--:--</span>
                </div>
            </div>
        </div>

        <div class="top-stats">
            <div class="balance-pill">
                <div class="balance-label">–ë–ê–õ–ê–ù–° TC</div>
                <div class="balance-value"><span id="main-balance">0</span></div>
            </div>
            <div class="status-info-grid">
                <div class="status-card">
                    <span>–≠–ù–ï–†–ì–ò–Ø</span>
                    <b id="energy">0%</b>
                </div>
                <div class="status-card" style="border: 1px solid rgba(255, 215, 0, 0.4); background: rgba(255,215,0,0.05);">
                    <span>JACKPOT</span>
                    <b id="jackpot-display">0 TC</b>
                </div>
                <div class="status-card">
                    <span>–ü–†–û–ß–ù–û–°–¢–¨</span>
                    <b id="dur">0%</b>
                </div>
            </div>
        </div>

        <div class="game-view-container" id="game-view-block">
            <div class="game-view">
                <img id="float-img" src="fish_anim.webp" class="float-img">
                <div id="status-msg">–ì–û–¢–û–í –ö –ó–ê–ë–†–û–°–£</div>
                <div id="catch-overlay">
                    <div class="catch-modal">
                        <h2>–£–õ–û–í! üêü</h2>
                        <p id="catch-info">...</p>
                        <button class="btn-cast" onclick="closeCatch()">–í –°–ê–î–û–ö</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tabs-container">
        <div id="tab-main" class="tab-content tab-active">
            <div id="lake-status" style="text-align:center; font-weight:900; color:var(--accent); margin-bottom:15px; font-size:12px; letter-spacing:1px; text-transform:uppercase;">
                üìç –¢–ï–ö–£–©–ê–Ø –õ–û–ö–ê–¶–ò–Ø: –û–ë–´–ß–ù–û–ï –û–ó–ï–†–û
            </div>
            <div class="info-banner" style="background:rgba(255,215,0,0.05); border:1px dashed var(--gold); padding:10px; border-radius:12px; font-size:10px; text-align:center; color:var(--text-muted);">
                –°–æ–≤–µ—Ç: –ó–æ–ª–æ—Ç–æ–π –∫–∞—Ä–ø –≤–µ—Å–æ–º 5000 TC –æ–±–∏—Ç–∞–µ—Ç –≤ –≥–ª—É–±–æ–∫–∏—Ö –≤–æ–¥–∞—Ö –û–∑–µ—Ä–∞ –ù–∞–¥–µ–∂–¥—ã.
            </div>
        </div>

        <div id="tab-shop" class="tab-content">
            <h3 style="text-align:center; color:var(--gold); margin-bottom:20px; font-weight:900; letter-spacing:2px; text-transform:uppercase;">–†–´–ë–û–õ–û–í–ù–´–ô –•–ê–ë</h3>
            
            <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 1px; border-radius: 18px; margin-bottom: 20px;">
                <button class="btn-cast" style="background: #064e3b; box-shadow: 0 4px 0 #043529;" onclick="doAction('sell')">
                    üí∞ –ü–†–û–î–ê–¢–¨ –í–ï–°–¨ –£–õ–û–í (2 TC/–∫–≥)
                </button>
            </div>

            <div style="background:rgba(255,255,255,0.03); padding:20px; border-radius:20px; border: 1px solid rgba(255,215,0,0.1); margin-bottom: 25px;">
                <h4 style="color:var(--gold); font-size:13px; margin-bottom:12px; text-transform:uppercase; text-align:center; font-weight:800;">–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥</h4>
                <div style="display:flex; gap:10px;">
                    <input type="number" id="withdraw-amount" placeholder="–°—É–º–º–∞ TC (–æ—Ç 500)" 
                           style="flex:1; padding:12px; border-radius:12px; border:1px solid #334155; background:#000; color:#fff; font-family:var(--font-mono); font-size:14px; outline:none;">
                    <button class="admin-btn" style="background:var(--gold); color:#000; width:100px; font-weight:900;" onclick="requestWithdraw()">–û–¢–ü–†–ê–í–ò–¢–¨</button>
                </div>
                <p style="font-size:9px; color:var(--text-muted); margin-top:10px; text-align:center; line-height:1.4;">
                    –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ ‚Äî 500 TC. –ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ç–∏: 5%. <br>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ 24 —á–∞—Å–æ–≤.
                </p>
            </div>

            <div id="cat-tc" class="shop-cat-content open">
                <div class="item-row">
                    <div class="item-info">
                        <h4>–†–µ–º–∫–æ–º–ø–ª–µ–∫—Ç</h4>
                        <p>–ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ —É–¥–æ—á–∫–∏</p>
                    </div>
                    <button class="admin-btn" style="background:#334155; color:#fff;" onclick="doAction('buy',{id:'repair'})">50 TC</button>
                </div>
                <div class="item-row">
                    <div class="item-info">
                        <h4>–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫</h4>
                        <p>–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –≤–æ—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ–π —ç–Ω–µ—Ä–≥–∏–∏</p>
                    </div>
                    <button class="admin-btn" style="background:#334155; color:#fff;" onclick="doAction('buy',{id:'energy'})">50 TC</button>
                </div>
                <div class="item-row">
                    <div class="item-info">
                        <h4>–ú—è–∫–∏—à ¬´–£–¥–∞—á–∞¬ª (x10)</h4>
                        <p>–ò—Å–∫–ª—é—á–∞–µ—Ç —à–∞–Ω—Å —Å—Ä—ã–≤–∞ —Ä—ã–±—ã –Ω–∞ 10 –±—Ä–æ—Å–∫–æ–≤</p>
                    </div>
                    <button class="admin-btn" style="background:#334155; color:#fff;" onclick="doAction('buy',{id:'myakish'})">100 TC</button>
                </div>
            </div>
        </div>

        <div id="tab-top" class="tab-content">
            <h3 style="text-align:center; color:var(--gold); margin-bottom:20px; font-weight:900; text-transform:uppercase;">–ó–ê–õ –°–õ–ê–í–´ –¢–ê–ú–ê–ö–û–ò–ù</h3>
            <div id="leaderboard-list" style="display:flex; flex-direction:column; gap:8px;">
                </div>
        </div>

        <div id="tab-admin" class="tab-content">
            <h3 style="text-align:center; color:var(--danger); margin-bottom:20px; font-weight:900; text-shadow: 0 0 10px rgba(239, 68, 68, 0.4); text-transform:uppercase;">–£–ü–†–ê–í–õ–ï–ù–ò–ï –í–°–ï–õ–ï–ù–ù–û–ô</h3>
            
            <div id="admin-stats" style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:25px;">
                <div class="status-card" style="border-color:var(--danger); background:rgba(239,68,68,0.05);">
                    <span>–ê–ö–¢–ò–í–ù–´–ï –ò–ì–†–û–ö–ò</span>
                    <b id="adm-total-users" style="color:var(--danger);">0</b>
                </div>
                <div class="status-card" style="border-color:var(--gold); background:rgba(255,215,0,0.05);">
                    <span>–û–ß–ï–†–ï–î–¨ –í–´–ü–õ–ê–¢</span>
                    <b id="adm-withdraw-count" style="color:var(--gold);">0</b>
                </div>
            </div>

            <div class="admin-section">
                <h4 style="color:var(--gold); font-size:11px; margin-bottom:15px; text-transform:uppercase; border-left:3px solid var(--gold); padding-left:10px; font-weight:800;">–ó–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–ø–ª–∞—Ç—É</h4>
                <div id="admin-withdraw-list"></div>
            </div>

            <div class="admin-section" style="margin-top:30px;">
                <h4 style="color:var(--gold); font-size:11px; margin-bottom:15px; text-transform:uppercase; border-left:3px solid var(--gold); padding-left:10px; font-weight:800;">–†–µ–¥–∞–∫—Ç–æ—Ä –∏–≥—Ä–æ–∫–æ–≤</h4>
                <div style="overflow-x:auto; border-radius:15px; border:1px solid rgba(255,255,255,0.05);">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>–ò–ì–†–û–ö / ID</th>
                                <th>TC</th>
                                <th>–î–ï–ô–°–¢–í–ò–Ø</th>
                            </tr>
                        </thead>
                        <tbody id="admin-user-list"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tab-info" class="tab-content">
            <h3 style="text-align:center; color:var(--gold); margin-bottom:20px; font-weight:900;">–ò–ù–§–û-–¶–ï–ù–¢–†</h3>
            <div style="background:rgba(255,255,255,0.03); padding:20px; border-radius:24px; border:1px solid rgba(255,255,255,0.05);">
                <p style="font-size:13px; color:var(--text-muted); line-height:1.7; margin-bottom:20px;">
                    –í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Tamacoin. –õ–æ–≤–∏—Ç–µ —Ä—ã–±—É, –∫–æ–ø–∏—Ç–µ TC –∏ —Å–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å –∑–∞ –º–µ—Å—Ç–æ –≤ —Ç–æ–ø–µ. 
                    –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥—Ä—É–∑–µ–π:
                </p>
                <div id="ref-link" style="background:#000; padding:18px; font-size:11px; color:var(--gold); border:1px solid #334155; border-radius:16px; word-break:break-all; font-family:var(--font-mono); margin-bottom:20px; text-align:center; box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);">...</div>
                <button class="btn-cast" style="height:44px; font-size:14px; background:var(--bg); border:1px solid var(--gold); box-shadow:none; color:var(--gold);" onclick="copyRef()">–ö–û–ü–ò–†–û–í–ê–¢–¨ –°–°–´–õ–ö–£</button>
            </div>
        </div>
    </div>

    <div class="action-container" id="main-controls" style="padding:15px; background:var(--bg); border-top:1px solid rgba(255,255,255,0.05); flex-shrink:0;">
        <button id="bonus-btn" class="btn-cast" style="margin-bottom:12px; background:var(--success); display:none; box-shadow: 0 4px 0 #065f46;" onclick="doAction('get_daily')">üéÅ –ü–û–õ–£–ß–ò–¢–¨ –ë–û–ù–£–°</button>
        <button id="cast-btn" class="btn-cast" onclick="startFishing()">–°–î–ï–õ–ê–¢–¨ –ó–ê–ë–†–û–°</button>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="showTab('main', this)"><i>üé£</i>–õ–û–í–õ–Ø</div>
        <div class="nav-item" onclick="showTab('shop', this)"><i>üõí</i>–†–´–ù–û–ö</div>
        <div id="nav-admin-btn" class="nav-item" style="display:none;" onclick="showTab('admin', this)"><i>‚ö°</i>ADMIN</div>
        <div class="nav-item" onclick="showTab('top', this)"><i>üèÜ</i>–¢–û–ü</div>
        <div class="nav-item" onclick="showTab('info', this)"><i>‚ÑπÔ∏è</i>–ò–ù–§–û</div>
    </div>
    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // --- –ö–û–ù–°–¢–ê–ù–¢–´ –ò–î–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò ---
        const userId = tg.initDataUnsafe?.user?.id?.toString() || '7883085758';
        const userName = tg.initDataUnsafe?.user?.first_name || '–†—ã–±–∞–∫';
        const ADMIN_ID = '7883085758'; // –¢–≤–æ–π ID –¥–ª—è "–†–µ–∂–∏–º–∞ –ë–æ–≥–∞"
        
        // URL —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Render
        const API = 'https://tama-bot-server.onrender.com/api/action';
        
        let lastBonusTime = 0;
        let currentLake = 'normal';

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        if (userId === ADMIN_ID) {
            const adminBtn = document.getElementById('nav-admin-btn');
            if(adminBtn) adminBtn.style.display = 'flex';
        }

        // --- –ì–õ–ê–í–ù–û–ï –Ø–î–†–û –°–í–Ø–ó–ò –° –°–ï–†–í–ï–†–û–ú ---
        async function doAction(action, payload = {}) {
            try {
                const response = await fetch(API, { 
                    method: 'POST', 
                    headers: {'Content-Type': 'application/json'}, 
                    body: JSON.stringify({ userId, userName, action, payload }) 
                });
                
                if (!response.ok) throw new Error('Network response was not ok');
                
                const data = await response.json(); 
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–ë–∞–Ω)
                if (data.error === "BANNED") {
                    document.body.innerHTML = `
                        <div style="height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; background:#000; color:red; padding:30px; text-align:center;">
                            <h1 style="font-size:40px; margin-bottom:20px;">üö´ –ë–ê–ù</h1>
                            <p style="color:white; font-family:monospace;">${data.msg}</p>
                            <p style="margin-top:20px; font-size:10px; color:gray;">ID: ${userId}</p>
                        </div>`;
                    return;
                }
                
                updateUI(data);

                // –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∫—Ä–æ–º–µ –æ–±—ã—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)
                if (data.msg && action !== 'load' && action !== 'get_top' && action !== 'admin_get_all') {
                    tg.showAlert(data.msg);
                }
            } catch(e) { 
                console.error("–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ API:", e);
                // –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —Å–ø–∏—Ç –Ω–∞ Render, —É–≤–µ–¥–æ–º–ª—è–µ–º
                if (action === 'load') document.getElementById('status-msg').innerText = "–ü–†–û–ë–£–ñ–î–ï–ù–ò–ï –°–ï–†–í–ï–†–ê...";
            }
        }

        // --- –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê (–ó–û–õ–û–¢–ê–Ø –ë–ê–ó–ê) ---
        function updateUI(d) {
            if(!d) return;
            
            // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            const balanceEl = document.getElementById('main-balance');
            const jackpotEl = document.getElementById('jackpot-display');
            const energyEl = document.getElementById('energy');
            const durEl = document.getElementById('dur');

            if(balanceEl) balanceEl.innerText = Math.floor(d.b || 0).toLocaleString();
            if(jackpotEl) jackpotEl.innerText = Math.floor(d.jackpot?.pool || 0).toLocaleString() + ' TC';
            if(energyEl) energyEl.innerText = (d.energy || 0) + '%';
            if(durEl) durEl.innerText = Math.floor(d.dur || 0) + '%';
            
            // –°—Å—ã–ª–∫–∞ –∏ –≤—Ä–µ–º—è –±–æ–Ω—É—Å–∞
            const refEl = document.getElementById('ref-link');
            if(refEl) refEl.innerText = `https://t.me/tamacoin_bot?start=${userId}`;
            
            lastBonusTime = d.lastBonus || 0;

            // –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–ª–æ–≤–∞
            if(d.catchData) {
                const infoEl = document.getElementById('catch-info');
                const overlayEl = document.getElementById('catch-overlay');
                if(infoEl && overlayEl) {
                    infoEl.innerText = `${d.catchData.type} ‚Äî ${d.catchData.w}`;
                    overlayEl.style.display = 'flex';
                    tg.HapticFeedback.notificationOccurred('success');
                }
            }

            // –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–±—ã—Ç–∏–π
            const eventEl = document.getElementById('events-line');
            if(d.events && d.events.length > 0 && eventEl) {
                eventEl.innerText = d.events.join('  ‚Ä¢  ');
            }

            // –î–∞–Ω–Ω—ã–µ –≤–∫–ª–∞–¥–æ–∫
            if(d.topPlayers) renderTop(d.topPlayers);
            if(d.allUsers) renderAdmin(d);
        }

        // --- –§–£–ù–ö–¶–ò–ò –õ–û–í–õ–ò (–ê–ù–ò–ú–ê–¶–ò–Ø) ---
        function startFishing() {
            const btn = document.getElementById('cast-btn');
            const float = document.getElementById('float-img');
            const status = document.getElementById('status-msg');
            
            if(!btn || !float || !status) return;

            btn.disabled = true;
            float.className = 'float-img anim-cast';
            float.style.opacity = '1';
            status.innerText = "–ó–ê–ö–ò–î–´–í–ê–ï–ú –°–ù–ê–°–¢–ò...";
            
            tg.HapticFeedback.impactOccurred('heavy');

            // –ò–º–∏—Ç–∞—Ü–∏—è –ø–æ–ª–µ—Ç–∞ –ø–æ–ø–ª–∞–≤–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º
            setTimeout(() => { 
                doAction('cast', { lake: currentLake }); 
            }, 1600);
        }

        function closeCatch() {
            document.getElementById('catch-overlay').style.display = 'none';
            document.getElementById('cast-btn').disabled = false;
            document.getElementById('float-img').style.opacity = '0';
            document.getElementById('float-img').className = 'float-img';
            document.getElementById('status-msg').innerText = "–ì–û–¢–û–í –ö –ó–ê–ë–†–û–°–£";
        }

        // --- –§–ò–ù–ê–ù–°–û–í–´–ï –û–ü–ï–†–ê–¶–ò–ò ---
        function requestWithdraw() {
            const amountInput = document.getElementById('withdraw-amount');
            const amount = parseInt(amountInput.value);
            
            if (!amount || amount < 500) {
                tg.showAlert("–û—à–∏–±–∫–∞: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ 500 TC");
                return;
            }
            doAction('withdraw_request', { amount });
            amountInput.value = '';
        }

        // --- –ú–û–î–£–õ–¨ –ê–î–ú–ò–ù–ò–°–¢–†–ò–†–û–í–ê–ù–ò–Ø (GOD MODE) ---
        function renderAdmin(d) {
            const totalUsersEl = document.getElementById('adm-total-users');
            const withdrawCountEl = document.getElementById('adm-withdraw-count');
            const wList = document.getElementById('admin-withdraw-list');
            const uList = document.getElementById('admin-user-list');

            if(totalUsersEl) totalUsersEl.innerText = d.allUsers.length;
            if(withdrawCountEl) withdrawCountEl.innerText = d.withdrawRequests.length;

            // –û—á–µ—Ä–µ–¥—å –≤—ã–ø–ª–∞—Ç
            if(wList) {
                if (d.withdrawRequests.length === 0) {
                    wList.innerHTML = '<p style="font-size:10px; color:#475569; text-align:center; padding:10px;">–û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞</p>';
                } else {
                    wList.innerHTML = d.withdrawRequests.map(r => `
                        <div class="withdraw-card">
                            <p style="font-size:11px; margin-bottom:5px;">üë§ <b>${r.n}</b> <span style="opacity:0.6;">(ID: ${r.userId})</span></p>
                            <p style="font-size:15px; font-weight:900; color:var(--gold);">${r.amount} TC</p>
                            <p style="font-size:9px; color:gray; margin:5px 0 10px;">${r.date}</p>
                            <button class="admin-btn" style="background:var(--success); color:white; width:100%; height:35px;" 
                                    onclick="doAction('admin_confirm_payout', {reqId:${r.reqId}})">–ü–û–î–¢–í–ï–†–î–ò–¢–¨ –ò –û–¢–ü–†–ê–í–ò–¢–¨</button>
                        </div>
                    `).join('');
                }
            }

            // –¢–∞–±–ª–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞–º–∏
            if(uList) {
                uList.innerHTML = d.allUsers.map(u => `
                    <tr style="${u.isBanned ? 'background:rgba(239,68,68,0.08);' : ''}">
                        <td style="font-size:10px; line-height:1.2;"><b>${u.n}</b><br><span style="color:gray;">${u.id}</span></td>
                        <td style="font-weight:900; color:var(--gold); font-family:var(--font-mono);">${Math.floor(u.b)}</td>
                        <td>
                            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:4px;">
                                <button class="admin-btn" style="background:var(--accent); color:black;" onclick="adminOp('${u.id}', 'add_money', 1000)">+1k</button>
                                <button class="admin-btn" style="background:var(--success); color:white;" onclick="adminOp('${u.id}', 'set_vip', 7)">VIP</button>
                                <button class="admin-btn" style="background:${u.isBanned ? 'var(--text-main)' : 'var(--danger)'}; color:${u.isBanned ? 'black' : 'white'}; grid-column: span 2;" 
                                        onclick="adminOp('${u.id}', 'ban')">${u.isBanned ? '–†–ê–ó–ë–ê–ù–ò–¢–¨' : '–ë–ê–ù'}</button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }
        }

        function adminOp(targetId, op, val = 0) {
            doAction('admin_user_op', { targetId, op, val });
        }

        // --- –õ–û–ì–ò–ö–ê –¢–û–ü–ê ---
        function renderTop(players) {
            const container = document.getElementById('leaderboard-list');
            if(!container) return;
            container.innerHTML = players.map((p, i) => `
                <div style="display:flex; justify-content:space-between; align-items:center; padding:14px; background:rgba(255,255,255,0.03); border-radius:15px; ${p.id == userId ? 'border:1px solid var(--gold); background:rgba(255,215,0,0.04);' : ''}">
                    <span style="font-size:13px; font-weight:800;">${i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : '#' + (i + 1)} ${p.n}</span>
                    <b style="color:var(--gold); font-family:var(--font-mono);">${Math.floor(p.b).toLocaleString()} TC</b>
                </div>
            `).join('');
        }

        // --- –°–ò–°–¢–ï–ú–ê –¢–ê–ë–û–í ---
        function showTab(name, el) {
            const contents = document.querySelectorAll('.tab-content');
            const items = document.querySelectorAll('.nav-item');
            
            contents.forEach(t => t.classList.remove('tab-active'));
            items.forEach(n => n.classList.remove('active'));
            
            const targetTab = document.getElementById('tab-' + name);
            if(targetTab) targetTab.classList.add('tab-active');
            if(el) el.classList.add('active');
            
            // –í–∏–¥–∏–º–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
            const isMain = (name === 'main');
            const topArea = document.getElementById('top-area-wrapper');
            const mainCtrls = document.getElementById('main-controls');
            
            if(topArea) topArea.style.display = isMain ? 'block' : 'none';
            if(mainCtrls) mainCtrls.style.display = isMain ? 'block' : 'none';
            
            // –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
            if(name === 'top') doAction('get_top');
            if(name === 'admin') doAction('admin_get_all');
            
            tg.HapticFeedback.selectionChanged();
        }

        function copyRef() {
            const link = document.getElementById('ref-link').innerText;
            navigator.clipboard.writeText(link).then(() => {
                tg.showAlert("–¢–≤–æ—è —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! –û—Ç–ø—Ä–∞–≤–ª—è–π –¥—Ä—É–∑—å—è–º.");
            });
        }

        // --- –ì–õ–û–ë–ê–õ–¨–ù–´–ô –¢–ò–ö-–¢–ê–ö (1 –°–ï–ö–£–ù–î–ê) ---
        setInterval(() => {
            const now = Date.now();
            
            // –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ –±–æ–Ω—É—Å–∞
            const bBtn = document.getElementById('bonus-btn');
            const bTimer = document.getElementById('bonus-timer');
            const timeLeft = 86400000 - (now - lastBonusTime);
            
            if(timeLeft > 0 && lastBonusTime > 0) {
                if(bBtn) bBtn.style.display = 'none';
                if(bTimer) bTimer.innerText = new Date(timeLeft).toISOString().substr(11, 8);
            } else {
                if(bBtn) bBtn.style.display = 'block';
                if(bTimer) bTimer.innerText = "–ì–û–¢–û–í!";
            }

            // –¢–∞–π–º–µ—Ä –ó–æ–ª–æ—Ç–æ–≥–æ –ß–∞—Å–∞ (–¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ 00:00)
            const gTimer = document.getElementById('gold-timer');
            const nextHour = (3600000 - (now % 3600000));
            if(gTimer) gTimer.innerText = new Date(nextHour).toISOString().substr(11, 8);
        }, 1000);

        // --- –ü–ï–†–í–´–ô –ó–ê–ü–£–°–ö ---
        doAction('load');
    </script>
</body>
</html>
